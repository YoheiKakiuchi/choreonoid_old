option(BUILD_CHOREONOID_EXECUTABLE "Building the executable file of Choreonoid" ON)
if(NOT BUILD_CHOREONOID_EXECUTABLE)
  return()
endif()

set(target choreonoid)
set(sources main.cpp)
if(WIN32)
  set(sources ${sources} choreonoid.rc)
endif()

qt5_add_resources(resources choreonoid.qrc)
choreonoid_add_executable(${target} ${sources} ${resources})
target_link_libraries(${target} CnoidBase)
set_target_properties(${target} PROPERTIES PROJECT_LABEL Application)

if(MSVC)
  set_target_properties(${target} PROPERTIES DEBUG_POSTFIX -debug)
  if(CHOREONOID_USE_SUBSYSTEM_CONSOLE)
    set_target_properties(${target} PROPERTIES LINK_FLAGS "/SUBSYSTEM:CONSOLE")
  else()
    set_target_properties(${target} PROPERTIES WIN32_EXECUTABLE true)
  endif()
endif()

install(FILES choreonoid.1 DESTINATION share/man/man1)
